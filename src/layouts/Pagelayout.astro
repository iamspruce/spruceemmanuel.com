---
import MainLayout from "./Layout.astro";

export interface Props {
  title: string;
  description: string;
  pubDate?: string;
  image?: string;
  link?: string;
}

const { title, description, pubDate, image, link } = Astro.props;
---

<MainLayout {title} {description} {image}>
  <article itemscope="" itemtype="https://schema.org/BlogPosting" class="">
    <header class="page-header">
      <hgroup role="group" aria-roledescription="Heading group">
        <h1 class="page-header-title" set:html={title} />
        <p
          aria-roledescription="subtitle"
          class="page-header-subtitle"
          set:html={description}
        />
      </hgroup>
      {
        pubDate && (
          <div class="page-header-date">
            <span>
              Created on{" "}
              {new Date(pubDate).toLocaleDateString("en-US", {
                year: "numeric",
                month: "long",
                day: "numeric",
              })}
            </span>
          </div>
        )
      }
      {
        link && (
          <div class="page-header-date">
            <a href={link} target="_blank" rel="noopener noreferrer">
              Go to project page
            </a>
          </div>
        )
      }
    </header>
  </article>
  <section itemprop="articleBody" class="page-body">
    <slot />
  </section>
</MainLayout>

<style>
  /* This entire selector is global to work with your setup. */
  :global(.stand-out > span) {
    display: inline-block;
    position: relative;
    font-weight: 900; /* This effect works best with a bold font */
    color: var(--gray-12); /* White text to stand out against the shadow */
    will-change: transform;
    transition: transform 0.3s ease;

    /* * NEW 3D Extruded Shadow Effect
       * We layer multiple, non-blurred shadows, each offset by 1px.
       * The final shadow is slightly larger and darker to create a subtle outline.
      */
    text-shadow:
      1px 1px 0px var(--gray-11),
      2px 2px 0px var(--gray-11),
      3px 3px 0px var(--gray-11),
      4px 4px 7px var(--gray-2); /* Optional: a final soft shadow for depth */
  }

  /* Trigger the animation on the letters when hovering the parent span */
  :global(.stand-out:hover > span) {
    animation: spring-bounce 0.8s ease-out;
  }

  @keyframes spring-bounce {
    0% {
      transform: scale(1) translateY(0);
    }
    20% {
      transform: scale(1.3, 0.7) translateY(0);
    }
    40% {
      transform: scale(0.8, 1.2) translateY(-20px);
    }
    60% {
      transform: scale(1.1, 0.9) translateY(0);
    }
    80% {
      transform: scale(0.95, 1.05) translateY(-10px);
    }
    100% {
      transform: scale(1) translateY(0);
    }
  }

  /* Staggered animation delays for the wave effect */
  :global(.stand-out > span:nth-of-type(1)) {
    animation-delay: 0.05s;
  }
  :global(.stand-out > span:nth-of-type(2)) {
    animation-delay: 0.1s;
  }
  :global(.stand-out > span:nth-of-type(3)) {
    animation-delay: 0.15s;
  }
  :global(.stand-out > span:nth-of-type(4)) {
    animation-delay: 0.2s;
  }
  :global(.stand-out > span:nth-of-type(5)) {
    animation-delay: 0.25s;
  }
  :global(.stand-out > span:nth-of-type(6)) {
    animation-delay: 0.3s;
  }
</style>
